import{r as g,j as e,R as B,a as R}from"./client-DvaAtPIX.js";const E=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}],F=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],O=t=>`₩${t.toLocaleString()}`,A=t=>`${t.toLocaleString()}원`,z=t=>`${Math.round(t*100)}%`,W=t=>`${Math.max(...t)*100}%`;function T(t,o){const[a,r]=g.useState(()=>{const s=localStorage.getItem(t);return s?JSON.parse(s):o});return g.useEffect(()=>{localStorage.setItem(t,JSON.stringify(a))},[a]),[a,r]}const $=(t,o=!1)=>{const{price:a}=t.product,{quantity:r}=t,s=H(t,o);return Math.round(a*r*(1-s))},H=(t,o)=>{const{discounts:a}=t.product,{quantity:r}=t,s=a.reduce((c,p)=>r>=p.quantity&&p.rate>c?p.rate:c,0);return o?Math.min(s+.05,.5):s},L=(t,o)=>{let a=0,r=0;return t.forEach(s=>{const c=s.product.price*s.quantity;a+=c,r+=$(s)}),o&&(o.discountType==="amount"?r=Math.max(0,r-o.discountValue):r=Math.round(r*(1-o.discountValue/100))),{totalBeforeDiscount:Math.round(a),totalAfterDiscount:Math.round(r)}},D=(t,o,a)=>t.map(r=>r.product.id===o?{...r,quantity:a}:r),Q=(t,o)=>[...t,{product:o,quantity:1}],U=(t,o)=>t.filter(a=>a.product.id!==o),k=(t,o)=>{const a=o.find(s=>s.product.id===t.id);return t.stock-(a?.quantity||0)};function P(t){const[o,a]=g.useState(null),[r,s]=T("cart",[]),c=g.useCallback(l=>{if(L(r,o).totalAfterDiscount<1e4&&l.discountType==="percentage"){t?.("error","percentage 쿠폰은 10,000원 이상 구매 시 사용 가능합니다.");return}a(l),t?.("success","쿠폰이 적용되었습니다.")},[L]),p=()=>L(r,o),x=l=>k(l,r),i=g.useCallback(l=>{if(k(l,r)<=0){t?.("error","재고가 부족합니다!");return}s(y=>{const N=y.find(u=>u.product.id===l.id);if(N){const u=N.quantity+1;return u>l.stock?(t?.("error",`재고는 ${l.stock}개까지만 있습니다.`),y):D(y,l.id,u)}return Q(y,l)}),t?.("success","장바구니에 담았습니다")},[r,k]),d=l=>{s(j=>U(j,l))},n=g.useCallback((l,j)=>{if(j<=0){d(l.id);return}const y=l.stock;if(j>y){t?.("error",`재고는 ${y}개까지만 있습니다.`);return}s(N=>D(N,l.id,j))},[d,k]);return{cart:r,selectedCoupon:o,addToCart:i,removeFromCart:d,applyCoupon:c,calculateCartTotal:p,getRemainingStock:x,updateQuantity:n,clearCart:()=>{s([])}}}const I=t=>/^[A-Z0-9]{4,12}$/.test(t),J=t=>t>=0,Z=t=>t>0,V=({size:t})=>e.jsx("svg",{className:`w-${t} h-${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),_=()=>e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),G=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),K=()=>e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),q=({size:t,strokeWidth:o=1,className:a})=>e.jsx("svg",{className:`w-${t} h-${t} ${a}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:o,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),X=()=>e.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),M={name:"",price:0,stock:0,description:"",discounts:[]},Y=({editingProduct:t,onSubmit:o,onCancel:a,addNotification:r})=>{const[s,c]=g.useState(M),p=t!==null;g.useEffect(()=>{c(t?{name:t.name,price:t.price,stock:t.stock,description:t.description||"",discounts:t.discounts||[]}:M)},[t]);const x=u=>{u.preventDefault(),o(s)},i=u=>{const h=u.target.value;(h===""||/^\d+$/.test(h))&&c({...s,price:h===""?0:parseInt(h)})},d=u=>{const h=u.target.value,f=parseInt(h)||0;Z(f)||(r("가격은 0보다 커야 합니다","error"),c({...s,price:0}))},n=u=>{const h=u.target.value;(h===""||/^\d+$/.test(h))&&c({...s,stock:h===""?0:parseInt(h)})},b=u=>{const h=u.target.value,f=parseInt(h)||0;J(f)?f>9999&&(r("재고는 9999개를 초과할 수 없습니다","error"),c({...s,stock:9999})):(r("재고는 0보다 커야 합니다","error"),c({...s,stock:0}))},l=(u,h)=>{const f=[...s.discounts];f[u].quantity=parseInt(h)||0,c({...s,discounts:f})},j=(u,h)=>{const f=[...s.discounts];f[u].rate=(parseInt(h)||0)/100,c({...s,discounts:f})},y=u=>{const h=s.discounts.filter((f,C)=>C!==u);c({...s,discounts:h})},N=()=>{c({...s,discounts:[...s.discounts,{quantity:10,rate:.1}]})};return e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:p?"상품 수정":"새 상품 추가"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),e.jsx("input",{type:"text",value:s.name,onChange:u=>c({...s,name:u.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),e.jsx("input",{type:"text",value:s.description,onChange:u=>c({...s,description:u.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),e.jsx("input",{type:"text",value:s.price===0?"":s.price,onChange:i,onBlur:d,className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),e.jsx("input",{type:"text",value:s.stock===0?"":s.stock,onChange:n,onBlur:b,className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),e.jsxs("div",{className:"space-y-2",children:[s.discounts.map((u,h)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"number",value:u.quantity,onChange:f=>l(h,f.target.value),className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),e.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),e.jsx("input",{type:"number",value:u.rate*100,onChange:f=>j(h,f.target.value),className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),e.jsx("span",{className:"text-sm",children:"% 할인"}),e.jsx("button",{type:"button",onClick:()=>y(h),className:"text-red-600 hover:text-red-800",children:e.jsx(V,{size:5})})]},h)),e.jsx("button",{type:"button",onClick:N,className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:p?"수정":"추가"})]})]})})},ee=({onSubmit:t,onCancel:o,addNotification:a})=>{const[r,s]=g.useState({name:"",code:"",discountType:"amount",discountValue:0}),c=i=>{if(i.preventDefault(),!I(r.code)){a("쿠폰 코드는 4-12자의 영문 대문자와 숫자만 가능합니다","error");return}t(r),s({name:"",code:"",discountType:"amount",discountValue:0})},p=i=>{const d=i.target.value;(d===""||/^\d+$/.test(d))&&s({...r,discountValue:d===""?0:parseInt(d)})},x=i=>{const d=parseInt(i.target.value)||0;r.discountType==="percentage"?d>100?(a("할인율은 100%를 초과할 수 없습니다","error"),s({...r,discountValue:100})):d<0&&s({...r,discountValue:0}):d>1e5?(a("할인 금액은 100,000원을 초과할 수 없습니다","error"),s({...r,discountValue:1e5})):d<0&&s({...r,discountValue:0})};return e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰명"}),e.jsx("input",{type:"text",value:r.name,onChange:i=>s({...r,name:i.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:"신규 가입 쿠폰",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰 코드"}),e.jsx("input",{type:"text",value:r.code,onChange:i=>s({...r,code:i.target.value.toUpperCase()}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm font-mono",placeholder:"WELCOME2024",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"할인 타입"}),e.jsxs("select",{value:r.discountType,onChange:i=>s({...r,discountType:i.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",children:[e.jsx("option",{value:"amount",children:"정액 할인"}),e.jsx("option",{value:"percentage",children:"정률 할인"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.discountType==="amount"?"할인 금액":"할인율(%)"}),e.jsx("input",{type:"text",value:r.discountValue===0?"":r.discountValue,onChange:p,onBlur:x,className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:r.discountType==="amount"?"5000":"10",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:"쿠폰 생성"})]})]})})},te=({addNotification:t,products:o,productActions:a,coupons:r,addCoupon:s,deleteCoupon:c})=>{const{cart:p}=P(),[x,i]=g.useState("products"),[d,n]=g.useState(!1),[b,l]=g.useState(!1),[j,y]=g.useState(null),N=m=>{if(I(m.code)||t("쿠폰 코드는 4-12자의 영문 대문자와 숫자여야 합니다.","error"),s(m),r.find(w=>w.code===m.code)){t("이미 존재하는 쿠폰 코드입니다.","error");return}t("쿠폰이 추가되었습니다.","success"),n(!1)},u=m=>{y(m),l(!0)},h=m=>{j?(a.updateProduct(j.id,m),t("상품이 수정되었습니다.","success"),y(null)):(a.addProduct({...m,discounts:m.discounts}),t("상품이 추가되었습니다.","success")),y(null),l(!1)},f=(m,v)=>{if(v){const w=o.find(S=>S.id===v);if(w&&C(w)<=0)return"SOLD OUT"}return A(m)},C=m=>{const v=p.find(S=>S.product.id===m.id);return m.stock-(v?.quantity||0)};return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>i("products"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${x==="products"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"상품 관리"}),e.jsx("button",{onClick:()=>i("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${x==="coupons"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"쿠폰 관리"})]})}),x==="products"?e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),e.jsx("button",{onClick:()=>{y(null),l(!0)},className:"px-4 py-2 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800",children:"새 상품 추가"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f(m.price,m.id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.stock>10?"bg-green-100 text-green-800":m.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[m.stock,"개"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:m.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>u(m),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),e.jsx("button",{onClick:()=>{a.deleteProduct(m.id),t("상품이 삭제되었습니다.","success")},className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},m.id))})]})}),b&&e.jsx(Y,{editingProduct:j,onSubmit:h,onCancel:()=>{y(null),l(!1)},addNotification:t})]}):e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[r.map(m=>e.jsx("div",{className:"relative bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:m.code}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:m.discountType==="amount"?`${m.discountValue.toLocaleString()}원 할인`:`${m.discountValue}% 할인`})})]}),e.jsx("button",{onClick:()=>{c(m.code),t("쿠폰이 삭제되었습니다.","success")},className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(G,{})})]})},m.code)),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:e.jsxs("button",{onClick:()=>n(!d),className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[e.jsx(K,{}),e.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),d&&e.jsx(ee,{onSubmit:N,onCancel:()=>n(!1),addNotification:t})]})]})]})},se=({products:t,coupons:o,debouncedSearchTerm:a,addNotification:r,cart:s,cartActions:c})=>{const p=(n,b)=>{if(b){const l=t.find(j=>j.id===b);if(l&&c.getRemainingStock(l)<=0)return"SOLD OUT"}return O(n)},x=g.useCallback(()=>{const n=`ORD-${Date.now()}`;r(`주문이 완료되었습니다. 주문번호: ${n}`,"success"),c.clearCart()},[r]),i=c.calculateCartTotal(),d=a?t.filter(n=>n.name.toLowerCase().includes(a.toLowerCase())||n.description&&n.description.toLowerCase().includes(a.toLowerCase())):t;return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("section",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",t.length,"개 상품"]})]}),d.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500",children:['"',a,'"에 대한 검색 결과가 없습니다.']})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(n=>{const b=c.getRemainingStock(n);return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:e.jsx(X,{})}),n.isRecommended&&e.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"BEST"}),n.discounts.length>0&&e.jsxs("span",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded",children:["~",W(n.discounts.map(l=>l.rate))]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:n.name}),n.description&&e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:n.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:p(n.price,n.id)}),n.discounts.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[n.discounts[0].quantity,"개 이상 구매시 할인 ",n.discounts[0].rate*100,"%"]})]}),e.jsxs("div",{className:"mb-3",children:[b<=5&&b>0&&e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["품절임박! ",b,"개 남음"]}),b>5&&e.jsxs("p",{className:"text-xs text-gray-500",children:["재고 ",b,"개"]})]}),e.jsx("button",{onClick:()=>c.addToCart(n),disabled:b<=0,className:`w-full py-2 px-4 rounded-md font-medium transition-colors ${b<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:b<=0?"품절":"장바구니 담기"})]})]},n.id)})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 space-y-4",children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(q,{size:5,strokeWidth:2,className:"mr-2"}),"장바구니"]}),s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{size:16,className:"text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):e.jsx("div",{className:"space-y-3",children:s.map(n=>{const b=s.some(u=>u.quantity>=10),l=$(n,b),j=n.product.price*n.quantity,y=l<j,N=y?z(1-l/j):"0%";return e.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:n.product.name}),e.jsx("button",{onClick:()=>c.removeFromCart(n.product.id),className:"text-gray-400 hover:text-red-500 ml-2",children:e.jsx(V,{size:4})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>c.updateQuantity(n.product,n.quantity-1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"−"})}),e.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:n.quantity}),e.jsx("button",{onClick:()=>c.updateQuantity(n.product,n.quantity+1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"+"})})]}),e.jsxs("div",{className:"text-right",children:[y&&e.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",N]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(l).toLocaleString(),"원"]})]})]})]},n.product.id)})})]}),s.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),e.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),o.length>0&&e.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500",value:c.selectedCoupon?.code||"",onChange:n=>{const b=o.find(l=>l.code===n.target.value);b&&c.applyCoupon(b)},children:[e.jsx("option",{value:"",children:"쿠폰 선택"}),o.map(n=>e.jsxs("option",{value:n.code,children:[n.name," (",n.discountType==="amount"?`${n.discountValue.toLocaleString()}원`:`${n.discountValue}%`,")"]},n.code))]})]}),e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"상품 금액"}),e.jsxs("span",{className:"font-medium",children:[i.totalBeforeDiscount.toLocaleString(),"원"]})]}),i.totalBeforeDiscount-i.totalAfterDiscount>0&&e.jsxs("div",{className:"flex justify-between text-red-500",children:[e.jsx("span",{children:"할인 금액"}),e.jsxs("span",{children:["-",(i.totalBeforeDiscount-i.totalAfterDiscount).toLocaleString(),"원"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[e.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[i.totalAfterDiscount.toLocaleString(),"원"]})]})]}),e.jsxs("button",{onClick:x,className:"w-full mt-4 py-3 bg-yellow-400 text-gray-900 rounded-md font-medium hover:bg-yellow-500 transition-colors",children:[i.totalAfterDiscount.toLocaleString(),"원 결제하기"]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:e.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]})]})]})})]})};function re(t){const[o,a]=T("coupons",t),r=g.useCallback(c=>{a(p=>[...p,c])},[o]),s=g.useCallback(c=>{a(p=>p.filter(x=>x.code!==c))},[]);return{coupons:o,addCoupon:r,removeCoupon:s}}const ne=({notification:t,onClose:o})=>e.jsxs("div",{className:`p-4 rounded-md shadow-md text-white flex justify-between items-center ${t.type==="error"?"bg-red-600":t.type==="warning"?"bg-yellow-600":"bg-green-600"}`,children:[e.jsx("span",{className:"mr-2",children:t.message}),e.jsx("button",{onClick:()=>o(t.id),className:"text-white hover:text-gray-200",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t.id),ae=t=>{const[o,a]=g.useState([]),r=g.useCallback((c,p="success")=>{const x=Date.now().toString();a(i=>[...i,{id:x,message:c,type:p}]),setTimeout(()=>{a(i=>i.filter(d=>d.id!==x))},3e3)},[]),s=g.useCallback(c=>{a(p=>p.filter(x=>x.id!==c))},[]);return{notifications:o,addNotification:r,removeNotification:s}};function oe(t){const[o,a]=T("products",t),r=g.useCallback(x=>{const i={...x,id:`p${Date.now()}`};a(d=>[...d,i])},[]),s=g.useCallback((x,i)=>{a(d=>d.map(n=>n.id===x?{...n,...i}:n))},[]),c=g.useCallback(x=>{a(i=>i.filter(d=>d.id!==x))},[]),p=g.useCallback((x,i)=>{a(d=>d.map(n=>n.id===x?{...n,stock:i}:n))},[]);return{products:o,addProduct:r,updateProduct:s,deleteProduct:c,updateProductStock:p}}function ce(t,o){const[a,r]=g.useState(t);return g.useEffect(()=>{const s=setTimeout(()=>{r(t)},o);return()=>clearTimeout(s)},[t,o]),a}const ie=({value:t,onChange:o,className:a,placeholder:r,debounceMs:s=0})=>{const c=ce(o,s)??o,p=x=>{s>0?c(x.target.value):o(x.target.value)};return e.jsx("div",{className:a,children:e.jsx("input",{type:"text",value:t,onChange:p,placeholder:r||"상품 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})})},le=()=>{const{products:t,...o}=oe(E),{cart:a,...r}=P((u,h)=>l(h,u)),{coupons:s,addCoupon:c,removeCoupon:p}=re(F),[x,i]=g.useState(0),[d,n]=g.useState(!1),{notifications:b,addNotification:l,removeNotification:j}=ae(),[y,N]=g.useState("");return g.useEffect(()=>{const u=a.reduce((h,f)=>h+f.quantity,0);i(u)},[a]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.length>0&&e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:b.map(u=>e.jsx(ne,{notification:u,onClose:j},u.id))}),e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"SHOP"}),!d&&e.jsx(ie,{value:y,onChange:N,debounceMs:500,placeholder:"상품 검색...",className:"ml-8 flex-1 max-w-md"})]}),e.jsxs("nav",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>n(!d),className:`px-3 py-1.5 text-sm rounded transition-colors ${d?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:d?"쇼핑몰로 돌아가기":"관리자 페이지로"}),!d&&e.jsxs("div",{className:"relative",children:[e.jsx(_,{}),a.length>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:x})]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:d?e.jsx(te,{products:t,productActions:o,coupons:s,addCoupon:c,deleteCoupon:p,addNotification:l}):e.jsx(se,{products:t,coupons:s,debouncedSearchTerm:y,addNotification:l,cart:a,cartActions:r})})]})};B.createRoot(document.getElementById("root")).render(e.jsx(R.StrictMode,{children:e.jsx(le,{})}));
